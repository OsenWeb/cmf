{% extends 'BWSkeletonBundle:Frontend:layout.html.twig' %}

{% block title %}{{ entity.title ? entity.title : entity.heading }}{% endblock %}

{% block metaDescription %}{{ entity.metaDescription ? entity.metaDescription : entity.heading }}{% endblock %}

{% block head %}
    {{ parent() }}
    {% if app.request.query.get('page') %}
        <link rel="canonical" href="{{ url('vendor_show_by_slug', {'slug': entity.slug}) }}" />
    {% endif %}
{% endblock %}

{% block content %}
    <div class="breadcrumbs root">
        <div class="col-xs-1-1">
            <a href="#">Главная</a>
            <span class="separator">&gt;</span>
            <a href="#">Волосы</a>
            <span class="separator">&gt;</span>
            <span>Волосы на заколках</span>
        </div>
    </div>

    <div class="product-category-page root row">
        <div class="product-filter col">
            <div class="h4 title dark">Фильтр:</div>
            {{ form(form) }}
        </div>
        <div class="product-vendor items-list page-content row">
            <div class="col">
                <div class="vendor">
                    <h1>{{ entity.heading }}</h1>
                    {% if entity.image %}
                        <div class="image">
                            <img src="{{ asset(entity.image.webPath)|imagine_filter('middle_thumb') }}" alt="{{ entity.image.alt }}" title="{{ entity.image.title }}" />
                        </div>
                    {% endif %}
                    <div>{{ entity.description|raw }}</div>
                </div>
                <div class="h2">Все товары производителя</div>
                {% if pagination.getTotalItemCount %}
                    <div class="row level-row">
                        <div class="sort-condition col">
                            Сортировать по: 
                        </div>

                        <div class="products-count col-r">
                            Всего товаров: {{ pagination.getTotalItemCount }}
                        </div>
                    </div>
                    <div class="products-list row level-row">
                        {% for product in pagination %}
                            {% include 'BWShopBundle:Product:row.html.twig' with {'entity': product} %}
                        {% endfor %}
                    </div>
                    <div class="navigation">
                        {{ knp_pagination_render(pagination) }}
                    </div>
                {% else %}
                    <div>Товары отстутствуют</div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}